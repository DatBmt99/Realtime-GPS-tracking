<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/vaadin-upload/vaadin-upload.html"></head><body><dom-module id="state-imgur-upload"><template><style>:host{display:block;@apply --paper-font-body1;min-width:150px;white-space:nowrap;}</style><vaadin-upload on-upload-request="imageUploadRequest" on-upload-before="imageUploadBefore" on-upload-success="imageUploadSuccess" on-upload-abort="imageUploadAbort" method="POST" timeout="300000" max-files="[[maxFile]]" max-file-size="1000000" accept="image/*"></vaadin-upload></template><script>class StateImgurUpload extends Polymer.Element{static get is(){return"state-imgur-upload"}static get properties(){return{maxFile:{type:Number,value:10},imageObj:{type:Object,value(){return{}}}}}ready(){super.ready(),this.imageObj={}}imageUploadBefore(b){console.log("imageUploadBeforen");var c=b.detail.file;c.uploadTarget="https://api.imgur.com/3/image"}imageUploadRequest(b){var c=b.detail.file;b.detail.xhr.setRequestHeader("Authorization","Client-ID 8136119ef2bb534"),b.detail.formData.append("image",c)}imageUploadSuccess(b){var c=b.detail.xhr,a=JSON.parse(c.responseText),d=a.data.link,e=b.detail.file,f=e.name.replace(/\..+$/,""),g=f.replace(/[^A-Z0-9]+/gi,"_");this.imageObj[g]=d,console.log("imageUploadSuccess:"+this.imageObj[g]),this.dispatchEvent(new CustomEvent("upload-image-succes",{detail:d,bubbles:!0,composed:!0})),this.dispatchEvent(new CustomEvent("upload-image-change",{detail:this.imageObj,bubbles:!0,composed:!0}))}imageUploadAbort(b){var c=b.detail.file;console.log("imageUploadAbort:"+c.name);var a=c.name.replace(/\..+$/,""),d=a.replace(/[^A-Z0-9]+/gi,"_");delete this.imageObj[d],this.dispatchEvent(new CustomEvent("upload-image-change",{detail:this.imageObj,bubbles:!0,composed:!0}))}}window.customElements.define(StateImgurUpload.is,StateImgurUpload);</script></dom-module></body></html>